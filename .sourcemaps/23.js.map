{"version":3,"sources":["../../src/pages/otp/otp.ts","../../src/pages/otp/otp.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAA0C;AACa;AACiF;AAC1F;AACI;AAED;AAGW;AACe;AAC3B;AAOhD;IAKC,iBAAmB,OAAsB,EAC/B,IAAU,EACV,SAA0B,EAC1B,gBAAkC,EACrC,MAAa,EACb,UAAqB,EACrB,cAA6B,EAC7B,eAA+B,EAC/B,WAA6B,EAC7B,SAAmB,EAAS,MAAc,EAAS,QAAkB,EAAS,cAAiC,EAAS,KAAY;QATxH,YAAO,GAAP,OAAO,CAAe;QAC/B,SAAI,GAAJ,IAAI,CAAM;QACV,cAAS,GAAT,SAAS,CAAiB;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAkB;QACrC,WAAM,GAAN,MAAM,CAAO;QACb,eAAU,GAAV,UAAU,CAAW;QACrB,mBAAc,GAAd,cAAc,CAAe;QAC7B,oBAAe,GAAf,eAAe,CAAgB;QAC/B,gBAAW,GAAX,WAAW,CAAkB;QAC7B,cAAS,GAAT,SAAS,CAAU;QAAS,WAAM,GAAN,MAAM,CAAQ;QAAS,aAAQ,GAAR,QAAQ,CAAU;QAAS,mBAAc,GAAd,cAAc,CAAmB;QAAS,UAAK,GAAL,KAAK,CAAO;QAb3I,aAAQ,GAAQ,EAAE,CAAC;QACnB,QAAG,GAAQ,EAAE,CAAC;QAEd,WAAM,GAAQ,wBAAwB,CAAC,2BAA0B;QAWhE,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAChD,CAAC;IAEA,gCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;IACxC,CAAC;IACF,8BAAY,GAAZ,UAAa,OAAO;QACnB,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACnC,OAAO,EAAE,OAAO;YAChB,QAAQ,EAAE,IAAI;SACd,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,kCAAgB,GAAhB;QAEE,IAAI,KAAK,GAAC,IAAI,CAAC;QACf,MAAM,CAAC,IAAI,OAAO,CAAC,UAAS,OAAO,EAAC,MAAM;YAC1C,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;YACpE,OAAO,EAAE,CAAC;QACX,CAAC,CAAC,CAAC;IACH,CAAC;IACD,0BAAQ,GAAR;QAGA,EAAE,EAAC,IAAI,CAAC,cAAc,CAAC,MAAM,IAAE,CAAC,CAAC,CACjC,CAAC;YACA,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;YACxB,EAAE,EAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,IAAE,QAAQ,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,IAAE,OAAO,CAAC,CAChF,CAAC;gBACA,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YACxC,CAAC;YACD,IAAI,CACJ,CAAC;gBACA,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;YACrC,CAAC;QACF,CAAC;IACF,CAAC;IACD,4BAAU,GAAV;QAAA,iBAuBC;QArBA,IAAI,MAAM,GAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACzC,OAAO,EAAE,MAAM;YACf,OAAO,EAAE,oMAIC;SACT,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,EAAE,CAAC;QACjB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAM,IAAI,CAAC,MAAM,GAAC,yBAAyB,EAAC;YAC/D,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK;SAC3B,CAAC;aACD,SAAS,CAAC,cAAI;YACd,UAAU,CAAC;gBACV,MAAM,CAAC,OAAO,EAAE,CAAC;gBACjB,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACjC,CAAC,EAAC,IAAI,CAAC,CAAC;QACT,CAAC,EACD,aAAG;YACF,MAAM,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC,CAAC;IACH,CAAC;IAED,wBAAM,GAAN;QAAA,iBAmCC;QAjCA,IAAI,KAAK,GAAC,IAAI,CAAC;QACf,EAAE,EAAC,KAAK,CAAC,GAAG,CAAC,MAAM,IAAE,CAAC,CAAC,CACvB,CAAC;YACA,KAAK,CAAC,YAAY,CAAC,yDAAyD,CAAC,CAAC;YAC9E,MAAM,CAAC;QACR,CAAC;QAED,KAAK,CAAC,SAAS,CAAC,GAAG,GAAC,KAAK,CAAC,GAAG,CAAC;QAC9B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAM,IAAI,CAAC,MAAM,GAAC,aAAa,EAAC,KAAK,CAAC,SAAS,CAAC;aACnE,SAAS,CAAC,cAAI;YACd,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAChC,EAAE,EAAC,IAAI,CAAC,MAAM,IAAE,CAAC,CAAC,CAClB,CAAC;gBACA,IAAI,QAAM,GAAO,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBACzC,OAAO,EAAE,MAAM;oBACf,OAAO,EAAE,oNAIC;iBACT,CAAC,CAAC;gBACH,QAAM,CAAC,OAAO,EAAE,CAAC;gBACjB,KAAK,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC;oBAAK,UAAU,CAAC;wBAC5C,QAAM,CAAC,OAAO,EAAE,CAAC;wBACjB,KAAK,CAAC,QAAQ,EAAE,CAAC;oBAElB,CAAC,EAAE,IAAI,CAAC,CAAC;gBAAA,CAAC,CAAC;qBACX,KAAK,CAAC,aAAG,IAAG,KAAK,CAAC,YAAY,CAAC,oBAAoB,CAAC,CAAC,CAAC,QAAM,CAAC,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;YAC5E,CAAC;QACF,CAAC,EACD,aAAG;QAEH,CAAC,CAAC;IACH,CAAC;IACD,uBAAK,GAAL;QAEC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IACnC,CAAC;IAtHW,OAAO;QAJnB,gEAAS,CAAC;YACT,QAAQ,EAAE,UAAU;WACG;SACxB,CAAC;+EAMwC;YACzB,8DAAI;YACC,6EAAe;YACR,qEAAgB;YAC9B,wEAAM;YACF,6DAAU;YACN,8DAAc;YACb,gEAAe;YACnB,8HAAiB;YACnB,IAA0H;OAd/H,OAAO,CAuHnB;IAAD,CAAC;AAAA;SAvHY,OAAO,e;;;;;;;;;;;;;;;;;;;AClBqB;AACO;AAChB;AAUhC;IAAA;IAA4B,CAAC;IAAhB,aAAa;QARzB,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,qDAAO;aACR;YACD,OAAO,EAAE;gBACP,8DAAe,CAAC,QAAQ,CAAC,qDAAO,CAAC;aAClC;SACF,CAAC;OACW,aAAa,CAAG;IAAD,oBAAC;CAAA;AAAH","file":"23.js","sourcesContent":["import { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Platform, IonicPage, NavController, ToastController, MenuController, ModalController, NavParams, LoadingController } from 'ionic-angular';\nimport { Device } from '@ionic-native/device';\nimport { HttpClient } from '@angular/common/http';\n\nimport { User } from '../../providers/providers';\nimport { MainPage } from '../pages';\nimport { Freelancelist1Page } from '../freelancelist1/freelancelist1';\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite';\nimport { CommondataProvider } from '../../providers/commondata/commondata';\nimport { MyApp } from '../../app/app.component';\n\n@IonicPage()\n@Component({\n  selector: 'page-otp',\n  templateUrl: 'otp.html',\n})\nexport class OtpPage {\n\tDeviceID:string=\"\";\n\totp:string=\"\";\n\tmain_data:{device_id:string, otp:string, firstname:string, lastname:string, phone:string, email:string, username:string, password:string, login_type: any, location: string, street_name:string, state:string, code:string, postcode:string, longitude:any, latitude:any, category:any, sub_category:any};\n\tsource:string=\"https://ptezone.com.au\";//\"http://localhost:8000\";\n\tconstructor(public navCtrl: NavController,\n    public user: User,\n    public toastCtrl: ToastController,\n    public translateService: TranslateService,\n\tpublic device:Device,\n\tpublic httpClient:HttpClient, \n\tpublic menuController:MenuController,\n\tpublic modalController:ModalController,\n\tpublic loadingCtrl:LoadingController,\n\tpublic navParams:NavParams, public sqlite: SQLite, public platform: Platform, public commonProvider:CommondataProvider, public myApp: MyApp){\n\t\tthis.TryLogin();\n\t\tthis.main_data=this.navParams.get(\"main_data\");\n\t}\n\t\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad OtpPage');\n  }\n\tpresentToast(Message) {\n\t\tconst toast = this.toastCtrl.create({\n\t\t\tmessage: Message,\n\t\t\tduration: 3000\n\t\t});\n\t\ttoast.present();\n\t}\n\t\n\tRetrieveUserData()\n  {\n\t  let scope=this;\n\t  return new Promise(function(resolve,reject) {\n\t\t\tscope.commonProvider.GetLoginDetails(scope.commonProvider.DeviceID);\n\t\t\tresolve();\n\t\t});\n  }\n  TryLogin()\n\t{\n\t\t\n\t\tif(this.commonProvider.Status!=0)\n\t\t{\n\t\t\tthis.myApp.CheckLogin();\n\t\t\tif(this.commonProvider.User.Role==\"Tradie\" || this.commonProvider.Role==\"Admin\")\n\t\t\t{\n\t\t\t\tthis.navCtrl.setRoot(\"TradiehomePage\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.navCtrl.setRoot(\"ContentPage\");\n\t\t\t}\n\t\t}\n\t}\n\tResendCode()\n\t{\n\t\tlet loader:any = this.loadingCtrl.create({\n\t\tspinner: \"hide\",\n\t\tcontent: `<div class=\"custom-spinner-container\">\n\t\t\t\t\t\t<div class=\"custom-spinner-box\">\n\t\t\t\t\t\t\t<img src=\"assets/img/spinner.gif\" width=\"100%\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`\n\t\t});\n\t\tloader.present();\n\t\tthis.httpClient.post<any>(this.source+'/api/ResendVerification',{\n\t\t\temail: this.main_data.email\n\t\t})\n\t\t.subscribe(data => {\n\t\t\tsetTimeout(()=>{\n\t\t\t\tloader.dismiss();\n\t\t\t\tthis.presentToast(data.Message);\n\t\t\t},2000);\n\t\t},\n\t\terr => {\n\t\t\tloader.dismiss();\n\t\t})\n\t}\n\t\n\tVerify()\n\t{\n\t\tlet scope=this;\n\t\tif(scope.otp.length==0)\n\t\t{\n\t\t\tscope.presentToast(\"Please check your your email for the verification code.\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tscope.main_data.otp=scope.otp;\n\t\tthis.httpClient.post<any>(this.source+'/api/signup',scope.main_data)\n\t\t.subscribe(data => {\n\t\t\tthis.presentToast(data.message);\n\t\t\tif(data.status==1)\n\t\t\t{\n\t\t\t\tlet loader:any = this.loadingCtrl.create({\n\t\t\t\tspinner: \"hide\",\n\t\t\t\tcontent: `<div class=\"custom-spinner-container\">\n\t\t\t\t\t\t\t\t<div class=\"custom-spinner-box\">\n\t\t\t\t\t\t\t\t\t<img src=\"assets/img/spinner.gif\" width=\"100%\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t});\n\t\t\t\tloader.present();\n\t\t\t\tscope.RetrieveUserData().then(()=>{setTimeout(() => {\n\t\t\t\t\t\tloader.dismiss();\n\t\t\t\t\t\tscope.TryLogin();\n\t\t\t\t\t\t\n\t\t\t\t\t}, 2000);})\n\t\t\t\t.catch(err=>{scope.presentToast(\"Something is wrong\"); loader.dismiss();});\n\t\t\t}\n\t\t},\n\t\terr => {\n\t\t\t\n\t\t})\n\t}\n\tLogin()\n\t{\n\t\tthis.navCtrl.setRoot(\"LoginPage\");\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp/otp.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OtpPage } from './otp';\n\n@NgModule({\n  declarations: [\n    OtpPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OtpPage),\n  ],\n})\nexport class OtpPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp/otp.module.ts"],"sourceRoot":""}