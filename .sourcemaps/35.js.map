{"version":3,"sources":["../../src/pages/login/login.ts","../../src/pages/login/login.module.ts"],"names":[],"mappings":"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","file":"35.js","sourcesContent":["import { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Platform, IonicPage, NavController, NavParams, ToastController, MenuController, LoadingController } from 'ionic-angular';\nimport { Device } from '@ionic-native/device';\nimport { HttpClient } from '@angular/common/http';\nimport { FirstRunPage } from '../pages';\n\nimport { User } from '../../providers/providers';\nimport { MainPage } from '../pages';\nimport { Freelancelist1Page } from '../freelancelist1/freelancelist1';\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite';\nimport { CommondataProvider } from '../../providers/commondata/commondata';\nimport { MyApp } from '../../app/app.component';\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n  // The account fields for the login form.\n  // If you're using the username field with or without email, make\n  // sure to add it to the type\n  account: { username: string, password: string } = {\n    username: '',\n    password: ''\n  };\n  Error:string=\"\";\n\tShowPassword:boolean=false;\n  // Our translated text strings\n  private loginErrorString: string;\n\tDeviceID:string=\"\";\n\tLoginType:number=1;\n  constructor(public navCtrl: NavController,\n    public user: User,\n    public toastCtrl: ToastController,\n    public translateService: TranslateService,\n\tpublic device:Device,\n\tpublic httpClient:HttpClient,\n\tpublic menuController:MenuController,\n\tpublic navParams:NavParams, public sqlite: SQLite, public platform: Platform, public commonProvider:CommondataProvider, public myApp:MyApp, public loadingCtrl:LoadingController) {\n\t\tthis.menuController.swipeEnable(false);\n\t\tthis.TryLogin();\n\t  \n\t  \n\t//this.TryLogin();\n    this.translateService.get('LOGIN_ERROR').subscribe((value) => {\n      this.loginErrorString = value;\n    });\n\tthis.LoginType=this.navParams.get(\"LoginType\");\n\t\n  }\n\t\n  presentToast(Message) {\n    const toast = this.toastCtrl.create({\n      message: Message,\n      duration: 3000\n    });\n    toast.present();\n  }\n  \n\n  // Attempt to login in through our User service\n  \n  Login(){\n\t  \n\t  let scope=this;\n\t  if(scope.commonProvider.DeviceID==null)\n\t  {\n\t\t  scope.presentToast(\"Something is wrong\");\n\t\t  return;\n\t  }\n\tif(scope.account.username!=\"\" && scope.account.password!=\"\")\n\t{\n\t\tlet loader:any = this.loadingCtrl.create({\n\t\tspinner: \"hide\",\n\t\tcontent: `<div class=\"custom-spinner-container\" style=\"height:100%; width:100%;\">\n\t\t\t\t\t\t<div class=\"custom-spinner-box\">\n\t\t\t\t\t\t\t<img src=\"assets/img/spinner.gif\" width=\"100%\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`\n\t\t});\n\t\tloader.present();\n\t\tscope.httpClient.post<any>('https://ptezone.com.au/api/login',{\n\t\t\tDeviceID:scope.commonProvider.DeviceID,\n\t\t\tusername:scope.account.username,\n\t\t\tpassword:scope.account.password,\n\t\t\tlogin_type:scope.LoginType,\n\t\t})\n\t\t.subscribe(data => {\n\t\t\tif(data.Error==0)\n\t\t\t{\n\t\t\t\tscope.RetrieveUserData().then(()=>{setTimeout(() => {\n\t\t\t\t\t\tloader.dismiss();\n\t\t\t\t\t\tscope.TryLogin();\n\t\t\t\t\t\tscope.presentToast(\"Login successful\");\n\t\t\t\t\t\t\n\t\t\t\t\t}, 1000);})\n\t\t\t\t.catch(err=>{scope.presentToast(\"Something is wrong\"); loader.dismiss();});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tscope.presentToast(data.Message);\n\t\t\t\tloader.dismiss();\n\t\t\t}\n\t\t\t\n\t\t},\n\t\terr => {\n\t\t\tscope.Error=JSON.stringify(err);\n\t\t\tloader.dismiss();\n\t\t})\n\t}\n\telse{\n\t\tscope.presentToast(\"Please fill up data\");\n\t}\n\t\n  }\n  RetrieveUserData()\n  {\n\t  let scope=this;\n\t  return new Promise(function(resolve,reject) {\n\t\t\tscope.commonProvider.GetLoginDetails(scope.commonProvider.DeviceID);\n\t\t\tresolve();\n\t\t});\n  }\n  TryLogin()\n\t{\n\t\t\n\t\tif(this.commonProvider.Status!=0)\n\t\t{\n\t\t\tthis.myApp.CheckLogin();\n\t\t\tif(this.commonProvider.User.Role==\"Tradie\")\n\t\t\t{\n\t\t\t\tthis.navCtrl.setRoot(\"TradiehomePage\");\n\t\t\t}\n\t\t\telse if(this.commonProvider.Role==\"Admin\")\n\t\t\t{\n\t\t\t\tthis.navCtrl.setRoot(\"AdminhomePage\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.navCtrl.setRoot(\"ContentPage\");\n\t\t\t}\n\t\t}\n\t}\n\tForgotPassword()\n\t{\n\t\tthis.navCtrl.push('ForgotpasswordPage');\n\t}\n\tSignUp()\n\t{\n\t\tthis.navCtrl.push('Signup1Page');\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts"],"sourceRoot":""}